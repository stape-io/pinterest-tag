___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Pinterest Conversion API",
  "categories": [
    "ADVERTISING",
    "ANALYTICS",
    "CONVERSIONS",
    "MARKETING",
    "REMARKETING"
  ],
  "brand": {
    "id": "brand_dummy",
    "displayName": "Stape",
    "thumbnail": "data:image/png;base64,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"
  },
  "description": "Tag that send the event data from the Universal Analytics/GA4/Data client to Pinterest Conversion API.",
  "containerContexts": [
    "SERVER"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "RADIO",
    "name": "eventType",
    "radioItems": [
      {
        "value": "standard",
        "displayValue": "Standard",
        "subParams": [
          {
            "type": "SELECT",
            "name": "eventNameStandard",
            "macrosInSelect": false,
            "selectItems": [
              {
                "value": "page_visit",
                "displayValue": "page_visit"
              },
              {
                "value": "add_to_cart",
                "displayValue": "add_to_cart"
              },
              {
                "value": "checkout",
                "displayValue": "checkout"
              },
              {
                "value": "lead",
                "displayValue": "lead"
              },
              {
                "value": "search",
                "displayValue": "search"
              },
              {
                "value": "signup",
                "displayValue": "signup"
              },
              {
                "value": "view_category",
                "displayValue": "view_category"
              },
              {
                "value": "",
                "displayValue": "watch_video"
              },
              {
                "value": "",
                "displayValue": ""
              }
            ],
            "simpleValueType": true,
            "defaultValue": "page_visit"
          }
        ]
      },
      {
        "value": "inherit",
        "subParams": [],
        "displayValue": "Inherit from client"
      },
      {
        "value": "custom",
        "displayValue": "Custom",
        "subParams": [
          {
            "type": "TEXT",
            "name": "eventNameCustom",
            "simpleValueType": true
          }
        ]
      }
    ],
    "simpleValueType": true,
    "displayName": "Event Name Setup Method",
    "defaultValue": "standard"
  },
  {
    "type": "SELECT",
    "name": "actionSource",
    "displayName": "Action Source",
    "selectItems": [
      {
        "value": "web",
        "displayValue": "Web"
      },
      {
        "value": "offline",
        "displayValue": "Offline"
      },
      {
        "value": "app_ios",
        "displayValue": "App iOS"
      },
      {
        "value": "app_android",
        "displayValue": "App Android"
      }
    ],
    "simpleValueType": true,
    "defaultValue": "web"
  },
  {
    "type": "TEXT",
    "name": "advertiserId",
    "displayName": "Pinterest Advertiser ID",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      },
      {
        "type": "REGEX",
        "args": [
          "549\\d{9}"
        ],
        "errorMessage": "This value should match 549XXXXXXXXX"
      }
    ],
    "help": "You can find it by logging to the Pinterest account that owns your advertiser account, then go to \"ads.pinterest.com\". In the top navigation section, click on \"Viewing: \" and the advertiser id will be the number underneath the ad account name in the drop down menu. If your Pinterest account has multiple ad accounts, make sure you are choosing the proper one that you want to use for owning your API conversion events. Another way to confirm your advertiser id is to navigate to Ads \u003e Overview and look for the id in the URL path. It will look like: \"ads.pinterest.com/advertiser/ADVERTISER_ID/?...\"."
  },
  {
    "type": "TEXT",
    "name": "apiAccessToken",
    "displayName": "API Access Token",
    "simpleValueType": true,
    "help": "To use the Pinterest Conversions API, you need an access token.",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "CHECKBOX",
    "name": "testMode",
    "checkboxText": "Test request",
    "simpleValueType": true,
    "help": "The events will not be recorded but the API will still return the same response messages. Use this mode to verify your requests are working and your events are constructed correctly."
  },
  {
    "type": "CHECKBOX",
    "name": "useOptimisticScenario",
    "checkboxText": "Use Optimistic Scenario",
    "simpleValueType": true,
    "help": "The tag will call gtmOnSuccess() without waiting for a response from the API. This will speed up sGTM response time however your tag will always return the status fired successfully even in case it is not."
  },
  {
    "displayName": "Server Event Data Override",
    "name": "serverEventDataListGroup",
    "groupStyle": "ZIPPY_CLOSED",
    "type": "GROUP",
    "subParams": [
      {
        "name": "serverEventDataList",
        "simpleTableColumns": [
          {
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ],
            "defaultValue": "event_id",
            "displayName": "Property Name",
            "name": "name",
            "isUnique": true,
            "type": "SELECT",
            "selectItems": [
              {
                "value": "event_time",
                "displayValue": "Event Time"
              },
              {
                "value": "event_source_url",
                "displayValue": "Source URL"
              },
              {
                "value": "opt_out",
                "displayValue": "Opt Out"
              },
              {
                "value": "event_id",
                "displayValue": "Event ID"
              },
              {
                "value": "app_id",
                "displayValue": "App id"
              },
              {
                "value": "app_name",
                "displayValue": "App name"
              },
              {
                "value": "app_version",
                "displayValue": "App version"
              },
              {
                "value": "device_brand",
                "displayValue": "Device brand"
              },
              {
                "value": "device_carrier",
                "displayValue": "Device carrier"
              },
              {
                "value": "device_model",
                "displayValue": "Device model"
              },
              {
                "value": "device_type",
                "displayValue": "Device type"
              },
              {
                "value": "os_version",
                "displayValue": "OS version"
              },
              {
                "value": "wifi",
                "displayValue": "WiFi"
              },
              {
                "value": "language",
                "displayValue": "language"
              }
            ]
          },
          {
            "defaultValue": "",
            "displayName": "Property Value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "type": "SIMPLE_TABLE",
        "newRowButtonText": "Add property"
      }
    ],
    "help": "See \u003ca href\u003d\"https://s.pinimg.com/ct/docs/conversions_api/dist/v3.html\" target\u003d\"_blank\"\u003ethis documentation\u003c/a\u003e for more details on what data parameters you can override."
  },
  {
    "displayName": "User Data",
    "name": "userDataListGroup",
    "groupStyle": "ZIPPY_CLOSED",
    "type": "GROUP",
    "subParams": [
      {
        "name": "userDataList",
        "simpleTableColumns": [
          {
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ],
            "defaultValue": "em",
            "displayName": "Property Name",
            "name": "name",
            "isUnique": true,
            "type": "SELECT",
            "selectItems": [
              {
                "value": "em",
                "displayValue": "Email"
              },
              {
                "value": "ph",
                "displayValue": "Phone"
              },
              {
                "value": "ge",
                "displayValue": "Gender"
              },
              {
                "value": "db",
                "displayValue": "Date of Birth"
              },
              {
                "value": "ln",
                "displayValue": "Last Name"
              },
              {
                "value": "fn",
                "displayValue": "First Name"
              },
              {
                "value": "ct",
                "displayValue": "City"
              },
              {
                "value": "st",
                "displayValue": "State"
              },
              {
                "value": "zp",
                "displayValue": "Zip"
              },
              {
                "value": "country",
                "displayValue": "Country"
              },
              {
                "value": "hashed_maids",
                "displayValue": "maids"
              },
              {
                "value": "client_ip_address",
                "displayValue": "Client IP address"
              },
              {
                "value": "client_user_agent",
                "displayValue": "Client user agent"
              },
              {
                "value": "external_id",
                "displayValue": "External ID"
              },
              {
                "value": "click_id",
                "displayValue": "Click ID"
              }
            ]
          },
          {
            "defaultValue": "",
            "displayName": "Property Value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "type": "SIMPLE_TABLE",
        "newRowButtonText": "Add property"
      }
    ],
    "help": "See \u003ca href\u003d\"https://s.pinimg.com/ct/docs/conversions_api/dist/v3.html\" target\u003d\"_blank\"\u003ethis documentation\u003c/a\u003e for more details on what user data parameters you can add to the call. If the documentation requires the parameter to be hashed, you \u003cstrong\u003emust\u003c/strong\u003e hash it with SHA256, or the tag will do this automatically before sending the event to Pinterest."
  },
  {
    "displayName": "Custom Data",
    "name": "customDataListGroup",
    "groupStyle": "ZIPPY_CLOSED",
    "type": "GROUP",
    "subParams": [
      {
        "name": "customDataList",
        "simpleTableColumns": [
          {
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ],
            "defaultValue": "currency",
            "displayName": "Property Name",
            "name": "name",
            "isUnique": true,
            "type": "SELECT",
            "selectItems": [
              {
                "value": "currency",
                "displayValue": "Currency"
              },
              {
                "value": "value",
                "displayValue": "Value"
              },
              {
                "value": "content_ids",
                "displayValue": "Content IDs"
              },
              {
                "value": "contents",
                "displayValue": "Contents"
              },
              {
                "value": "num_items",
                "displayValue": "Num Items"
              },
              {
                "value": "order_id",
                "displayValue": "Order ID"
              },
              {
                "value": "search_string",
                "displayValue": "Search string"
              },
              {
                "value": "opt_out_type",
                "displayValue": "Opt Out Type"
              },
              {
                "value": "content_name",
                "displayValue": "Content Name"
              },
              {
                "value": "content_category",
                "displayValue": "Content Category"
              },
              {
                "value": "content_brand",
                "displayValue": "Content Brand"
              }
            ]
          },
          {
            "defaultValue": "",
            "displayName": "Property Value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "type": "SIMPLE_TABLE"
      }
    ],
    "help": "See \u003ca href\u003d\"https://s.pinimg.com/ct/docs/conversions_api/dist/v3.html\" target\u003d\"_blank\"\u003ethis documentation\u003c/a\u003e for more details on what data parameters you can add to the call."
  },
  {
    "type": "GROUP",
    "name": "consentSettingsGroup",
    "displayName": "Consent Settings",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "RADIO",
        "name": "adStorageConsent",
        "displayName": "",
        "radioItems": [
          {
            "value": "optional",
            "displayValue": "Send data always"
          },
          {
            "value": "required",
            "displayValue": "Send data in case marketing consent given"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "optional"
      }
    ]
  },
  {
    "displayName": "Logs Settings",
    "name": "logsGroup",
    "groupStyle": "ZIPPY_CLOSED",
    "type": "GROUP",
    "subParams": [
      {
        "type": "RADIO",
        "name": "logType",
        "radioItems": [
          {
            "value": "no",
            "displayValue": "Do not log"
          },
          {
            "value": "debug",
            "displayValue": "Log to console during debug and preview"
          },
          {
            "value": "always",
            "displayValue": "Always log to console"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "debug"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_SERVER___

const getAllEventData = require('getAllEventData');
const JSON = require('JSON');
const Math = require('Math');
const sendHttpRequest = require('sendHttpRequest');
const getTimestampMillis = require('getTimestampMillis');
const getContainerVersion = require('getContainerVersion');
const logToConsole = require('logToConsole');
const sha256Sync = require('sha256Sync');
const getRequestHeader = require('getRequestHeader');
const getType = require('getType');
const makeString = require('makeString');
const makeInteger = require('makeInteger');
const getRequestQueryParameter = require('getRequestQueryParameter');
const setCookie = require('setCookie');
const getCookieValues = require('getCookieValues');

const isLoggingEnabled = determinateIsLoggingEnabled();
const traceId = isLoggingEnabled ? getRequestHeader('trace-id') : undefined;

const eventData = getAllEventData();

if (!isConsentGivenOrNotRequired()) {
  return data.gtmOnSuccess();
}

let postUrl =
  'https://api.pinterest.com/v5/ad_accounts/' + data.advertiserId + '/events';
setClickIdCookieIfNeeded();
const mappedEventData = mapEvent(eventData, data);
const postBody = { data: [mappedEventData] };

if (data.testMode) {
  postUrl = postUrl + '?test=true';
}

if (isLoggingEnabled) {
  logToConsole(
    JSON.stringify({
      Name: 'Pinterest',
      Type: 'Request',
      TraceId: traceId,
      EventName: mappedEventData.event_name,
      RequestMethod: 'POST',
      RequestUrl: postUrl,
      RequestBody: postBody,
    })
  );
}

sendHttpRequest(
  postUrl,
  (statusCode, headers, body) => {
    if (isLoggingEnabled) {
      logToConsole(
        JSON.stringify({
          Name: 'Pinterest',
          Type: 'Response',
          TraceId: traceId,
          EventName: mappedEventData.event_name,
          ResponseStatusCode: statusCode,
          ResponseHeaders: headers,
          ResponseBody: body,
        })
      );
    }

    if (!data.useOptimisticScenario) {
      if (statusCode >= 200 && statusCode < 300) {
        data.gtmOnSuccess();
      } else {
        data.gtmOnFailure();
      }
    }
  },
  {
    headers: {
      'content-type': 'application/json',
      Authorization: 'Bearer ' + data.apiAccessToken,
    },
    method: 'POST',
  },
  JSON.stringify(postBody)
);

if (data.useOptimisticScenario) {
  data.gtmOnSuccess();
}
function getEventName(eventData, data) {
  if (data.eventType === 'inherit') {
    let eventName = eventData.event_name;

    let gaToEventName = {
      page_view: 'page_visit',
      'gtm.dom': 'page_visit',
      add_payment_info: 'custom',
      add_to_cart: 'add_to_cart',
      add_to_wishlist: 'custom',
      sign_up: 'signup',
      begin_checkout: 'custom',
      generate_lead: 'lead',
      purchase: 'checkout',
      search: 'search',
      view_item_list: 'view_category',
      view_item: 'custom',

      contact: 'lead',
      customize_product: 'custom',
      donate: 'custom',
      find_location: 'search',
      schedule: 'custom',
      start_trial: 'custom',
      submit_application: 'lead',
      subscribe: 'custom',

      'gtm4wp.addProductToCartEEC': 'add_to_cart',
      'gtm4wp.productClickEEC': 'custom',
      'gtm4wp.checkoutOptionEEC': 'checkout',
      'gtm4wp.checkoutStepEEC': 'custom',
      'gtm4wp.orderCompletedEEC': 'checkout',
    };

    if (!gaToEventName[eventName]) {
      return eventName;
    }

    return gaToEventName[eventName];
  }

  return data.eventType === 'standard'
    ? data.eventNameStandard
    : data.eventNameCustom;
}

function mapEvent(eventData, data) {
  let eventName = getEventName(eventData, data);

  let mappedData = {
    event_name: eventName,
    action_source: data.actionSource || 'web',
    partner_name: 'ss-stape',
    event_time: Math.round(getTimestampMillis() / 1000),
    custom_data: {
      np: 'ss-stape',
    },
    user_data: {},
  };

  if (mappedData.action_source === 'web') {
    mappedData.event_source_url = eventData.page_location;
    mappedData.user_data = {
      client_ip_address: eventData.ip_override,
      client_user_agent: eventData.user_agent,
    };
  }

  mappedData = addServerEventData(eventData, data, mappedData);
  mappedData = addUserData(eventData, mappedData);
  mappedData = addEcommerceData(eventData, mappedData);
  mappedData = overrideDataIfNeeded(data, mappedData);
  mappedData = fixValueTypes(mappedData);
  mappedData = cleanupData(mappedData);
  mappedData = hashDataIfNeeded(mappedData);

  return mappedData;
}

function isHashed(value) {
  if (!value) {
    return false;
  }

  return makeString(value).match('^[A-Fa-f0-9]{64}$') !== null;
}

function hashData(key, value) {
  if (!value) {
    return value;
  }

  const type = getType(value);

  if (type === 'undefined' || value === 'undefined') {
    return undefined;
  }

  if (type === 'object') {
    return value.map((val) => {
      return hashData(key, val);
    });
  }

  if (isHashed(value)) {
    return value;
  }

  value = makeString(value).trim().toLowerCase();

  if (key === 'ph') {
    value = value
      .split(' ')
      .join('')
      .split('-')
      .join('')
      .split('(')
      .join('')
      .split(')')
      .join('')
      .split('+')
      .join('');
  } else if (key === 'ct') {
    value = value.split(' ').join('');
  }

  return sha256Sync(value, { outputEncoding: 'hex' });
}

function hashDataIfNeeded(mappedData) {
  if (mappedData.user_data) {
    for (let key in mappedData.user_data) {
      if (
        key === 'em' ||
        key === 'ph' ||
        key === 'ge' ||
        key === 'db' ||
        key === 'ln' ||
        key === 'fn' ||
        key === 'ct' ||
        key === 'st' ||
        key === 'zp' ||
        key === 'country' ||
        key === 'hashed_maids' ||
        key === 'external_id'
      ) {
        let hashedValue = hashData(key, mappedData.user_data[key]);
        let type = getType(hashedValue);

        if (type !== 'undefined' && hashedValue !== 'undefined') {
          if (type !== 'object' && type !== 'array') {
            hashedValue = [hashedValue];
          }

          mappedData.user_data[key] = hashedValue;
        }
      }
    }
  }

  return mappedData;
}

function overrideDataIfNeeded(data, mappedData) {
  if (data.userDataList) {
    data.userDataList.forEach((d) => {
      mappedData.user_data[d.name] = d.value;
    });
  }

  if (data.customDataList) {
    data.customDataList.forEach((d) => {
      mappedData.custom_data[d.name] = d.value;
    });
  }
  if (data.serverEventDataList) {
    data.serverEventDataList.forEach((d) => {
      mappedData[d.name] = d.value;
    });
  }

  return mappedData;
}

function cleanupData(mappedData) {
  if (mappedData.user_data) {
    let userData = {};

    for (let userDataKey in mappedData.user_data) {
      if (mappedData.user_data[userDataKey]) {
        userData[userDataKey] = mappedData.user_data[userDataKey];
      }
    }

    mappedData.user_data = userData;
  }

  if (mappedData.custom_data) {
    let customData = {};

    for (let customDataKey in mappedData.custom_data) {
      if (mappedData.custom_data[customDataKey] || customDataKey === 'value') {
        customData[customDataKey] = mappedData.custom_data[customDataKey];
      }
    }

    mappedData.custom_data = customData;
  }

  return mappedData;
}

function addEcommerceData(eventData, mappedData) {
  let currencyFromItems = '';
  let valueFromItems = 0;
  let numItems = 0;
  let contentIds = [];

  if (eventData.items && eventData.items[0]) {
    mappedData.custom_data.contents = [];
    currencyFromItems = eventData.items[0].currency;

    eventData.items.forEach((d, i) => {
      let content = {};

      if (d.item_id) contentIds.push(d.item_id);
      if (d.quantity) {
        content.quantity = makeInteger(d.quantity);
        numItems += makeInteger(d.quantity);
      }

      if (d.price) {
        content.item_price = makeString(d.price);
        valueFromItems += d.quantity ? d.quantity * d.price : d.price;
      }

      mappedData.custom_data.contents[i] = content;
    });
  }

  if (eventData['x-ga-mp1-ev'])
    mappedData.custom_data.value = eventData['x-ga-mp1-ev'];
  else if (eventData['x-ga-mp1-tr'])
    mappedData.custom_data.value = eventData['x-ga-mp1-tr'];
  else if (eventData.value)
    mappedData.custom_data.value = makeString(eventData.value);
  else if (valueFromItems)
    mappedData.custom_data.value = makeString(valueFromItems);

  if (eventData.currency) mappedData.custom_data.currency = eventData.currency;
  else if (currencyFromItems)
    mappedData.custom_data.currency = currencyFromItems;

  if (contentIds.length) mappedData.custom_data.content_ids = contentIds;
  if (numItems) mappedData.custom_data.num_items = makeInteger(numItems);

  if (eventData.search_term)
    mappedData.custom_data.search_string = eventData.search_term;
  if (eventData.transaction_id)
    mappedData.custom_data.order_id = eventData.transaction_id;

  if (eventData.opt_out_type)
    mappedData.custom_data.opt_out_type = eventData.opt_out_type;
  if (eventData.content_name)
    mappedData.custom_data.content_name = eventData.content_name;
  if (eventData.content_category)
    mappedData.custom_data.content_category = eventData.content_category;
  if (eventData.content_brand)
    mappedData.custom_data.content_brand = eventData.content_brand;
  return mappedData;
}

function addUserData(eventData, mappedData) {
  let address = {};
  let user_data = {};
  if (getType(eventData.user_data) === 'object') {
    user_data = eventData.user_data;
    const addressType = getType(user_data.address);
    if (addressType === 'object' || addressType === 'array') {
      address = user_data.address[0] || user_data.address;
    }
  }

  if (eventData.external_id)
    mappedData.user_data.external_id = eventData.external_id;
  else if (eventData.user_id)
    mappedData.user_data.external_id = eventData.user_id;
  else if (eventData.userId)
    mappedData.user_data.external_id = eventData.userId;

  if (eventData.lastName) mappedData.user_data.ln = eventData.lastName;
  else if (eventData.LastName) mappedData.user_data.ln = eventData.LastName;
  else if (eventData.nameLast) mappedData.user_data.ln = eventData.nameLast;
  else if (eventData.last_name) mappedData.user_data.ln = eventData.last_name;
  else if (user_data.last_name) mappedData.user_data.ln = user_data.last_name;
  else if (address.last_name) mappedData.user_data.ln = address.last_name;

  if (eventData.firstName) mappedData.user_data.fn = eventData.firstName;
  else if (eventData.FirstName) mappedData.user_data.fn = eventData.FirstName;
  else if (eventData.nameFirst) mappedData.user_data.fn = eventData.nameFirst;
  else if (eventData.first_name) mappedData.user_data.fn = eventData.first_name;
  else if (user_data.first_name) mappedData.user_data.fn = user_data.first_name;
  else if (address.first_name) mappedData.user_data.fn = address.first_name;

  if (eventData.email) mappedData.user_data.em = eventData.email;
  else if (user_data.email_address)
    mappedData.user_data.em = user_data.email_address;
  else if (user_data.email) mappedData.user_data.em = user_data.email;

  if (eventData.phone) mappedData.user_data.ph = eventData.phone;
  else if (user_data.phone_number)
    mappedData.user_data.ph = user_data.phone_number;

  if (eventData.city) mappedData.user_data.ct = eventData.city;
  else if (address.city) mappedData.user_data.ct = address.city;

  if (eventData.state) mappedData.user_data.st = eventData.state;
  else if (eventData.region) mappedData.user_data.st = eventData.region;
  else if (user_data.region) mappedData.user_data.st = user_data.region;
  else if (address.region) mappedData.user_data.st = address.region;

  if (eventData.zip) mappedData.user_data.zp = eventData.zip;
  else if (eventData.postal_code)
    mappedData.user_data.zp = eventData.postal_code;
  else if (user_data.postal_code)
    mappedData.user_data.zp = user_data.postal_code;
  else if (address.postal_code) mappedData.user_data.zp = address.postal_code;

  if (eventData.countryCode)
    mappedData.user_data.country = eventData.countryCode;
  else if (eventData.country) mappedData.user_data.country = eventData.country;
  else if (user_data.country) mappedData.user_data.country = user_data.country;
  else if (address.country) mappedData.user_data.country = address.country;

  if (eventData.gender) mappedData.user_data.ge = eventData.gender;
  if (eventData.db) mappedData.user_data.db = eventData.db;
  if (eventData.hashed_maids)
    mappedData.user_data.hashed_maids = eventData.hashed_maids;
  const click_id = getCookieValues('_epik')[0] || eventData.click_id || '';
  if (click_id) mappedData.user_data.click_id = click_id;

  return mappedData;
}

function addServerEventData(eventData, data, mappedData) {
  if (eventData.event_id) mappedData.event_id = eventData.event_id;
  else if (eventData.transaction_id)
    mappedData.event_id = eventData.transaction_id;

  return mappedData;
}

function determinateIsLoggingEnabled() {
  const containerVersion = getContainerVersion();
  const isDebug = !!(
    containerVersion &&
    (containerVersion.debugMode || containerVersion.previewMode)
  );

  if (!data.logType) {
    return isDebug;
  }

  if (data.logType === 'no') {
    return false;
  }

  if (data.logType === 'debug') {
    return isDebug;
  }

  return data.logType === 'always';
}

function setClickIdCookieIfNeeded() {
  const click_id = getRequestQueryParameter('epik');
  if (click_id) {
    setCookie('_epik', click_id, {
      domain: 'auto',
      path: '/',
      secure: true,
      httpOnly: true,
      'max-age': 31536000, // 1 year
    });
  }
}

function fixValueTypes(mappedData) {
  const valueType = getType(mappedData.custom_data.value);
  if (valueType === 'number') {
    mappedData.custom_data.value = makeString(mappedData.custom_data.value);
  }
  if (mappedData.custom_data.contents) {
    mappedData.custom_data.contents.forEach((content) => {
      if (getType(content.item_price) === 'number') {
        content.item_price = makeString(content.item_price);
      }
    });
  }
  return mappedData;
}

function isConsentGivenOrNotRequired() {
  if (data.adStorageConsent !== 'required') return true;
  if (eventData.consent_state) return !!eventData.consent_state.ad_storage;
  const xGaGcs = eventData['x-ga-gcs'] || ''; // x-ga-gcs is a string like "G110"
  return xGaGcs[2] === '1';
}


___SERVER_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "read_event_data",
        "versionId": "1"
      },
      "param": [
        {
          "key": "eventDataAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "send_http",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedUrls",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://api.pinterest.com/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "all"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_container_data",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_request",
        "versionId": "1"
      },
      "param": [
        {
          "key": "headerWhitelist",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "headerName"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "trace-id"
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "headerName"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "x-ga-gcs"
                  }
                ]
              }
            ]
          }
        },
        {
          "key": "queryParametersAllowed",
          "value": {
            "type": 8,
            "boolean": true
          }
        },
        {
          "key": "headersAllowed",
          "value": {
            "type": 8,
            "boolean": true
          }
        },
        {
          "key": "queryParameterAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "requestAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "queryParameterWhitelist",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "queryParameter"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "epik"
                  }
                ]
              }
            ]
          }
        },
        {
          "key": "headerAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "cookieNames",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "_epik"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "set_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedCookies",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_epik"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: UI Check
  code: |-
    const mockData = {};
    let actualSuccessCallback, httpBody;

    mock('sendHttpRequest', (postUrl, response, options, body) => {
        actualSuccessCallback = response;
        httpBody = body;
        actualSuccessCallback(200, {}, '');
    });

    runCode(mockData);
setup: ''


___NOTES___

Created on 18/07/2022, 19:04:12


